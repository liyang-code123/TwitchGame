(this["webpackJsonptwitch-app"]=this["webpackJsonptwitch-app"]||[]).push([[0],{150:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(24),c=n.n(s),i=(n(150),n(41)),o=n(42),l=n(45),h=n(44),d=n(235),u=n(229),j=n(141),m=n(75),f=n(39),b=n(59),p=n(233),O=n(231),g=n(232),x="",y="".concat(x,"/login"),v=function(e){return fetch(y,{method:"POST",header:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){if(200!==e.status)throw Error("Fail to login");return e.json()}))},S="".concat(x,"/register"),C=function(e){return fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(200!==e.status)throw Error("Fail to register")}))},w=("".concat(x,"/logout"),"".concat(x,"/game")),I=function(){return fetch(w).then((function(e){if(200!==e.status)throw Error("Fail to get top games");return e.json()}))},k="".concat(x,"/game?game_name="),F="".concat(x,"/search?game_id="),P=function(e){return fetch("".concat(F).concat(e)).then((function(e){if(200!==e.status)throw Error("Fail to find the game");return e.json()}))},M=function(e){return function(e){return fetch("".concat(k).concat(e)).then((function(e){if(200!==e.status)throw Error("Fail to find the game");return e.json()}))}(e).then((function(e){if(e&&e.id)return P(e.id);throw Error("Fail to find the game")}))},E="".concat(x,"/favorite"),R=function(){return fetch(E,{credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to get favorite item");return e.json()}))},_="".concat(x,"/recommendation"),T=function(){return fetch(_,{credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to get recommended item");return e.json()}))},L=n(237),D=n(238),A=n(6),N=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={displayModel:!1},e.onFinish=function(t){console.log("Received values of form: ",t),v(t).then((function(t){console.log(t),e.setState({displayModel:!1}),e.props.onSuccess(),j.b.success("Welcome, ".concat(t.name))})).catch((function(e){j.b.error(e.message)}))},e.signinOnClick=function(){e.setState({displayModel:!0})},e.handleCancel=function(){e.setState({displayModel:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.displayModel;return Object(A.jsxs)("div",{children:[Object(A.jsx)(b.a,{shape:"round",onClick:this.signinOnClick,style:{marginRight:20},children:"Login"}),Object(A.jsx)(p.a,{title:"Log In",visible:e,onCancel:this.handleCancel,footer:null,destroyOnClass:!0,children:Object(A.jsxs)(O.a,{name:"normal_login",onFinish:this.onFinish,preserve:!1,children:[Object(A.jsx)(O.a.Item,{name:"user_id",rules:[{required:!0,message:"Please input your Username!"}],children:Object(A.jsx)(g.a,{prefix:Object(A.jsx)(L.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(A.jsx)(O.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(A.jsx)(g.a,{prefix:Object(A.jsx)(D.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(A.jsx)(O.a.Item,{children:Object(A.jsx)(b.a,{type:"primary",htmlType:"submit",children:"Login"})})]})})]})}}]),n}(r.Component),G=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={displayModal:!1},e.signupOnClick=function(){e.setState({displayModel:!0})},e.handleCancel=function(){e.setState({displayModel:!1})},e.onFinish=function(t){console.log("Received values of form: ",t),C(t).then((function(t){console.log(t),e.setState({displayModel:!1}),j.b.success("Register successfully!")})).catch((function(e){j.b.error(e.message)}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.displayModel;return Object(A.jsxs)("div",{children:[Object(A.jsx)(b.a,{shape:"round",type:"primary",onClick:this.signupOnClick,style:{marginRight:20},children:"Register"}),Object(A.jsx)(p.a,{title:"Register",visible:e,onCancel:this.handleCancel,footer:null,destroyOnClass:!0,children:Object(A.jsxs)(O.a,{name:"normal_register",onFinish:this.onFinish,preserve:!1,children:[Object(A.jsx)(O.a.Item,{name:"user_id",rules:[{required:!0,message:"Please input your Username!"}],children:Object(A.jsx)(g.a,{prefix:Object(A.jsx)(L.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(A.jsx)(O.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(A.jsx)(g.a,{prefix:Object(A.jsx)(D.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(A.jsx)(O.a.Item,{name:"first_name",rules:[{required:!0,message:"Please input your Firstname!"}],children:Object(A.jsx)(g.a,{placeholder:"firstname"})}),Object(A.jsx)(O.a.Item,{name:"last_name",rules:[{required:!0,message:"Please input your Lastname!"}],children:Object(A.jsx)(g.a,{placeholder:"lastname"})}),Object(A.jsx)(O.a.Item,{children:Object(A.jsx)(b.a,{type:"primary",htmlType:"submit",children:"Login"})})]})})]})}}]),n}(r.Component),q=n(234),V=n(239),J=n(144),U=n(240),B=n(241),K=d.a.SubMenu,H="streams",W="videos",z="clips",Q=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={displayDrawer:!1},e.onDrawerClose=function(){e.setState({displayDrawer:!1})},e.onFavoriteClick=function(){e.setState({displayDrawer:!0})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.VIDEO,n=e.STREAM,r=e.CLIP;return Object(A.jsxs)("div",{children:[Object(A.jsx)(b.a,{type:"primary",shape:"round",onClick:this.onFavoriteClick,icon:Object(A.jsx)(V.a,{}),children:"My Favorites"}),Object(A.jsx)(q.a,{title:"My Favorites",placement:"right",width:720,visible:this.state.displayDrawer,onClose:this.onDrawerClose,children:Object(A.jsxs)(d.a,{mode:"inline",defaultOpenKeys:[H],style:{height:"100%",borderRight:0},selectable:!1,children:[Object(A.jsx)(K,{icon:Object(A.jsx)(J.a,{}),title:"Streams",children:n.map((function(e){return Object(A.jsx)(d.a.Item,{children:Object(A.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"".concat(e.broadcaster_name," - ").concat(e.title)})},e.id)}))},H),Object(A.jsx)(K,{icon:Object(A.jsx)(U.a,{}),title:"Videos",children:t.map((function(e){return Object(A.jsx)(d.a.Item,{children:Object(A.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"".concat(e.broadcaster_name," - ").concat(e.title)})},e.id)}))},W),Object(A.jsx)(K,{icon:Object(A.jsx)(B.a,{}),title:"Clips",children:r.map((function(e){return Object(A.jsx)(d.a.Item,{children:Object(A.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"".concat(e.broadcaster_name," - ").concat(e.title)})},e.id)}))},z)]})})]})}}]),n}(r.Component),X=n(243),Y=n(244),Z=n(114),$=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={displayModal:!1},e.searchOnClick=function(){e.setState({displayModal:!0})},e.onSubmit=function(t){M(t.game_name).then((function(t){e.setState({displayModal:!1}),e.props.onSuccess(t)})).catch((function(e){j.b.error(e.message)}))},e.handleCancel=function(){e.setState({displayModal:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(b.a,{shape:"round",onClick:this.searchOnClick,icon:Object(A.jsx)(Z.a,{}),style:{marginLeft:"20px",marginTop:"20px"},children:"Custom Search "}),Object(A.jsx)(p.a,{title:"Search",visible:this.state.displayModal,onCancel:this.handleCancel,footer:null,children:Object(A.jsxs)(O.a,{name:"custom_search",onFinish:this.onSubmit,children:[Object(A.jsx)(O.a.Item,{name:"game_name",rules:[{required:!0,message:"Please enter a game name"}],children:Object(A.jsx)(g.a,{placeholder:"Game name"})}),Object(A.jsx)(O.a.Item,{children:Object(A.jsx)(b.a,{type:"primary",htmlType:"submit",children:"Search"})})]})})]})}}]),n}(r.Component),ee=n(120),te=n(107),ne=n(230),re=n(236),ae=n(242),se=ee.a.TabPane,ce="stream",ie="videos",oe="clips",le=function(e,t,n,r){var a="".concat(e.broadcaster_name," - ").concat(e.title),s=n.find((function(t){return t.id===e.id}));return Object(A.jsxs)(A.Fragment,{children:[t&&Object(A.jsx)(te.a,{title:s?"Remove from favorite list":"Add to favorite list",children:Object(A.jsx)(b.a,{shape:"circle",icon:s?Object(A.jsx)(V.a,{}):Object(A.jsx)(ae.a,{}),onClick:function(){var t;s?(t=e,fetch(E,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:t})}).then((function(e){if(200!==e.status)throw Error("Fail to delete favorite item")}))).then((function(){r()})).catch((function(e){j.b.error(e.message)})):function(e){return fetch(E,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:e})}).then((function(e){if(200!==e.status)throw Error("Fail to add favorite item")}))}(e).then((function(){r()})).catch((function(e){j.b.error(e.message)}))}})}),Object(A.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",width:450},children:Object(A.jsx)(te.a,{title:a,children:Object(A.jsx)("span",{children:a})})})]})},he=function(e,t,n,r){return Object(A.jsx)(ne.b,{grid:{xs:1,sm:2,md:4,lg:4,xl:6},dataSource:e,renderItem:function(e){return Object(A.jsx)(ne.b.Item,{style:{marginRight:"20px"},children:Object(A.jsx)(re.a,{title:le(e,t,n,r),children:Object(A.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:Object(A.jsx)("img",{alt:"Placeholder",src:(a=e.thumbnail_url,a.replace("%{height}","252").replace("%{width}","480").replace("{height}","252").replace("{width}","480"))})})})});var a}})},de=function(e){var t=e.resources,n=e.loggedIn,r=e.favoriteItems,a=e.favoriteOnChange,s=t.VIDEO,c=t.STREAM,i=t.CLIP,o=r.VIDEO,l=r.STREAM,h=r.CLIP;return Object(A.jsxs)(ee.a,{defaultActiveKey:ce,children:[Object(A.jsx)(se,{tab:"Streams",style:{height:"680px",overflow:"auto"},forceRender:!0,children:he(c,n,l,a)},ce),Object(A.jsx)(se,{tab:"Videos",style:{height:"680px",overflow:"auto"},forceRender:!0,children:he(s,n,o,a)},ie),Object(A.jsx)(se,{tab:"Clips",style:{height:"680px",overflow:"auto"},forceRender:!0,children:he(i,n,h,a)},oe)]})},ue=d.a.SubMenu,je=u.a.Header,me=u.a.Sider,fe=u.a.Content,be=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={loggedIn:!1,topGames:[],resources:{VIDEO:[],STREAM:[],CLIP:[]},favoriteItems:{VIDEO:[],STREAM:[],CLIP:[]}},e.componentDidMount=function(){I().then((function(t){e.setState({topGames:t})})).catch((function(e){j.b.error(e.message)}))},e.signinOnSuccess=function(){R().then((function(t){e.setState({favoriteItems:t,loggedIn:!0})})).catch((function(e){j.b.error(e.message)}))},e.customSearchOnSuccess=function(t){e.setState({resources:t})},e.onGameSelect=function(t){var n=t.key;"Recommendation"!==n?P(n).then((function(t){e.setState({resources:t})})):T().then((function(t){e.setState({resources:t})}))},e.favoriteOnChange=function(){console.log(1),R().then((function(t){e.setState({favoriteItems:t,loggedIn:!0})})).catch((function(e){j.b.error(e.message)}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.loggedIn;return Object(A.jsxs)(u.a,{children:[Object(A.jsxs)(je,{children:[Object(A.jsxs)(m.a,{justify:"space-between",children:[Object(A.jsx)(f.a,{children:e&&Object(A.jsx)(Q,{data:this.state.favoriteItems})}),Object(A.jsx)(f.a,{children:this.state.loggedIn?Object(A.jsx)(b.a,{shape:"round",onClick:this.signoutOnClick,children:"Logout"}):Object(A.jsxs)("div",{style:{display:"flex"},children:[Object(A.jsx)(N,{onSuccess:this.signinOnSuccess}),Object(A.jsx)(G,{})]})})]}),Object(A.jsx)(N,{onSuccess:this.signinOnSuccess})]}),Object(A.jsxs)(u.a,{children:[Object(A.jsxs)(me,{width:300,className:"site-layout-background",children:[Object(A.jsx)($,{onSuccess:this.customSearchOnSuccess}),Object(A.jsxs)(d.a,{mode:"inline",onSelect:this.onGameSelect,style:{marginTop:"10px"},children:[Object(A.jsx)(d.a.Item,{icon:Object(A.jsx)(X.a,{}),children:"Recommend for you!"},"Recommendation"),Object(A.jsx)(ue,{icon:Object(A.jsx)(Y.a,{}),title:"Popular Games",className:"site-top-game-list",children:this.state.topGames.map((function(e){return Object(A.jsxs)(d.a.Item,{style:{height:"50px"},children:[Object(A.jsx)("img",{alt:"Placeholder",src:e.box_art_url.replace("{height}","40").replace("{width}","40"),style:{borderRadius:"50%",marginRight:"20px"}}),Object(A.jsx)("span",{children:e.name})]},e.id)}))},"Popular Games")]})]}),Object(A.jsx)(u.a,{style:{padding:24},children:Object(A.jsx)(fe,{className:"site-layout-background",style:{padding:24,margin:0,height:800,overflow:"auto"},children:Object(A.jsx)(de,{resources:this.state.resources,loggedIn:this.state.loggedIn,favoriteItems:this.state.favoriteItems,favoriteOnChange:this.favoriteOnChange})})})]})]})}}]),n}(a.a.Component),pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,245)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(A.jsx)(be,{}),document.getElementById("root")),pe()}},[[227,1,2]]]);
//# sourceMappingURL=main.be35d3e4.chunk.js.map